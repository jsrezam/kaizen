<h2>Assign Customers</h2>

<p>
  {{ queryResult.items | json}}
</p>

<div *ngIf="!queryResult.items">
  <loading></loading>
</div>
<div>
  <p>
    <input #querySearch (keyup)="filter(querySearch.value)" type="text" class="form-control" placeholder="Search...">
  </p>
  <table class="table table-striped">
    <thead>
      <tr>
        <th *ngFor="let c of columns" aria-labelledby="tableLabel">
          <div *ngIf="c.isSortable" (click)="sortBy(c.key)">
            {{c.title}}
            <i *ngIf="query.sortBy === c.key" class="fa" [class.fa-sort-asc]="query.isSortAscending"
              [class.fa-sort-desc]="!query.isSortAscending"></i>
          </div>
          <div *ngIf="!c.isSortable">
            {{c.title}}
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <!-- <tr *ngFor="let c of queryResult.items"> -->
      <tr
        *ngFor="let c of filteredCustomers | slice: (this.query.page-1) * query.pageSize : this.query.page * query.pageSize">
        <td>
          <input style="text-align: center; vertical-align: middle; margin-left:auto; margin-right:auto;"
            type="checkbox" class="form-check-input" [(ngModel)]="c.isAssigned" #isChecked="ngModel">
        </td>
        <td>{{ c.id }}</td>
        <td>{{ c.lastName }}</td>
        <td>{{ c.firstName }}</td>
        <td>{{ c.address }}</td>
        <td>{{ c.city }}</td>
        <td>{{ c.region }}</td>
        <td>{{ c.homePhone }}</td>
        <td>{{ c.cellPhone }}</td>
        <!-- <td>
              <a class="btn btn-outline-success" [routerLink]="['/products/edit/', p.id]">Edit</a>
              <button class="btn btn-outline-danger" type="button" (click)="delete(p.id)">Delete</button>
            </td> -->
      </tr>
    </tbody>
  </table>
  <pagination [total-items]="queryResult.totalItems" [page-size]="query.pageSize" (page-changed)="onPageChage($event)">
  </pagination>
</div>
